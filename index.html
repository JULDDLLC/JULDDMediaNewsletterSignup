<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JULDD Media - Kids' AI Newsletter Signup</title>
    <style>
        /* --- THEME RESET & FONT --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            /* --- THEME CHANGE: Dark Mode Background --- */
            background-color: #1A202C; /* A dark navy/charcoal from your theme */
            min-height: 100vh; 
            padding: 20px; 
            color: #E2E8F0; /* Light text for dark background */
        }

        /* --- THEME CHANGE: Dark Form Container --- */
        .container { 
            max-width: 700px; 
            margin: 40px auto; 
            background: #2D3748; /* The dark gray card color from your theme */
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); 
            overflow: hidden; 
            border: 1px solid #4A5568; /* Subtle border */
        }
        
        .content-wrapper { display: grid; grid-template-columns: 1fr; gap: 0; }
        .image-section { line-height: 0; }
        .image-section img { width: 100%; height: auto; display: block; }

        .form-section { padding: 40px; display: flex; flex-direction: column; justify-content: center; }

        /* --- THEME CHANGE: Light Text Headers --- */
        .form-header { margin-bottom: 30px; }
        .form-header h1 { 
            color: #FFFFFF; /* White main header */
            font-size: 28px; 
            margin-bottom: 10px; 
            font-weight: 700; 
        }
        .form-header p { 
            color: #A0AEC0; /* Lighter gray for subheading */
            font-size: 14px; 
            line-height: 1.6; 
        }

        .form-group { margin-bottom: 20px; }
        label { 
            display: block; 
            margin-bottom: 8px; 
            color: #CBD5E0; /* Light gray for labels */
            font-weight: 600; 
            font-size: 14px; 
        }

        /* --- THEME CHANGE: Dark Inputs --- */
        input[type="text"], input[type="email"] { 
            width: 100%; 
            padding: 12px 15px; 
            background-color: #1A202C; /* Dark background for inputs */
            border: 2px solid #4A5568; /* Gray border */
            color: #FFFFFF; /* White text when typing */
            border-radius: 8px; 
            font-size: 14px; 
            font-family: inherit; 
            transition: all 0.3s ease; 
        }

        /* --- THEME CHANGE: Electric Green Focus Highlight --- */
        input[type="text"]:focus, input[type="email"]:focus { 
            outline: none; 
            border-color: #38B2AC; /* Your theme's electric green/teal */
            box-shadow: 0 0 0 3px rgba(56, 178, 172, 0.3); 
        }

        /* --- THEME CHANGE: Dark Sections --- */
        .children-section, .terms-section { 
            background: #1A202C; /* Matching dark background */
            padding: 20px; 
            border-radius: 10px; 
            margin-bottom: 20px; 
            border: 1px solid #4A5568;
        }
        .children-section h3, .terms-section h4 { 
            color: #FFFFFF; /* White headers for sections */
        }
        .terms-content, .terms-content h5 {
            color: #A0AEC0; /* Light gray for terms text */
        }

        /* --- THEME CHANGE: Electric Green Buttons --- */
        .add-child-btn { 
            background: #38B2AC; 
            color: #1A202C; /* Dark text for contrast */
            border: none; 
            padding: 8px 16px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 12px; 
            font-weight: 700; /* Bolder text */
            transition: background 0.3s ease; 
        }
        .add-child-btn:hover { background: #4FD1C5; } /* Lighter green on hover */

        .remove-child-btn { background: #E53E3E; color: white; border: none; padding: 10px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; transition: background 0.3s ease; font-weight: 600; }
        .remove-child-btn:hover { background: #FC8181; }

        /* --- THEME CHANGE: Electric Green Checkbox --- */
        .checkbox-group { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 20px; }
        .checkbox-group input[type="checkbox"] { 
            width: 18px; 
            height: 18px; 
            margin-top: 2px; 
            cursor: pointer; 
            accent-color: #38B2AC; /* Your theme's electric green/teal */
        }
        .checkbox-group label { margin: 0; font-weight: 400; font-size: 13px; line-height: 1.5; cursor: pointer; color: #CBD5E0; }

        /* --- THEME CHANGE: Electric Green Submit Button --- */
        .submit-btn { 
            width: 100%; 
            padding: 14px; 
            background: #38B2AC; /* Your theme's electric green/teal */
            color: #1A202C; /* Dark text for high contrast */
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }
        .submit-btn:hover { 
            background: #4FD1C5; /* Lighter green on hover */
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(56, 178, 172, 0.2); 
        }
        .submit-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; background: #4A5568; }

        /* --- Message Styles (No theme change needed, but good to check) --- */
        .success-message { display: none; background: #48BB78; color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 600; }
        .error-message { display: none; background: #E53E3E; color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 600; }
        
        .required { color: #38B2AC; } /* Using theme color for required asterisk */
        .loading { display: none; text-align: center; color: #FFFFFF; font-weight: 600; }
        .spinner { border: 3px solid #4A5568; border-top: 3px solid #38B2AC; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; vertical-align: middle; margin-right: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 768px) {
            .container { margin: 20px auto; }
            .form-section { padding: 30px 20px; }
        }
    </style>
</head>
<body>
    <!-- The HTML structure below is unchanged -->
    <div class="container">
        <div class="content-wrapper">
            <div class="image-section">
                <img src="https://ldfacwgnawbpvufohzgm.supabase.co/storage/v1/object/public/image-uploads/loaded_images/join_the_waitlist_20251102_044756_29d9781f.png?" alt="JULDD Media Kids AI Newsletter">
            </div>
            <div class="form-section">
                <div class="form-header">
                    <h1>Join Our Newsletter</h1>
                    <p>Get 1 month free access to JULDD Media's Kids' AI Newsletter featuring audio and animation content!</p>
                </div>
                <form id="signupForm" novalidate>
                    <div class="success-message" id="successMessage">âœ“ Thank you! Check your email for a confirmation. Let's celebrate! ðŸŽ‰</div>
                    <div class="error-message" id="errorMessage"></div>
                    <div class="form-group">
                        <label for="parentName">Parent/Guardian Name <span class="required">*</span></label>
                        <input type="text" id="parentName" name="parentName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="parentEmail">Email Address <span class="required">*</span></label>
                        <input type="email" id="parentEmail" name="parentEmail" required placeholder="your@email.com">
                    </div>
                    <div class="children-section">
                        <h3>Children in Household <span class="required">*</span><button type="button" class="add-child-btn" onclick="addChildField()">+ Add Child</button></h3>
                        <div id="childrenContainer">
                            <div class="child-input-group">
                                <input type="text" class="childName" placeholder="Child's name" required>
                                <button type="button" class="remove-child-btn" onclick="removeChildField(this)" style="display: none;">Remove</button>
                            </div>
                        </div>
                    </div>
                    <div class="terms-section">
                        <h4>ðŸ“‹ Terms & Conditions</h4>
                        <div class="terms-content">
                            <h5>1. Free Trial & Subscription</h5><p>You will receive one (1) month of complimentary access...</p>
                            <h5>2. Cancellation Policy</h5><p>You may cancel your subscription at any time...</p>
                            <h5>4. Data Privacy & COPPA Compliance</h5><ul><li>We comply with the Children's Online Privacy Protection Act (COPPA)</li><li>We collect only necessary information...</li><li>Your data will never be sold to third parties</li></ul>
                        </div>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                        <label for="agreeTerms">I agree to the Terms & Conditions and understand that my child(ren) will receive age-appropriate educational content</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="agreePrivacy" name="agreePrivacy" required>
                        <label for="agreePrivacy">I consent to receive newsletter updates and agree to JULDD Media's privacy policy</label>
                    </div>
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span class="loading" id="loading"><span class="spinner"></span>Processing...</span>
                        <span id="submitText">Get 1 Month Free Access</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <!-- The JavaScript below is unchanged -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script>
        const signupForm = document.getElementById('signupForm');
        const submitBtn = document.getElementById('submitBtn');
        const loading = document.getElementById('loading');
        const submitText = document.getElementById('submitText');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const childrenContainer = document.getElementById('childrenContainer');
        function addChildField() {
            const newField = document.createElement('div');
            newField.className = 'child-input-group';
            newField.innerHTML = `<input type="text" class="childName" placeholder="Child's name" required><button type="button" class="remove-child-btn" onclick="removeChildField(this)">Remove</button>`;
            childrenContainer.appendChild(newField);
        }
        function removeChildField(button) {
            if (childrenContainer.children.length > 1) {
                button.parentElement.remove();
            } else {
                showError('At least one child name is required.');
            }
        }
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
        }
        function launchConfetti() {
            const duration = 3 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }
        signupForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            if (!document.getElementById('agreeTerms').checked || !document.getElementById('agreePrivacy').checked) {
                showError('You must agree to the terms and privacy policy to continue.');
                return;
            }
            const parentName = document.getElementById('parentName').value.trim();
            const parentEmail = document.getElementById('parentEmail').value.trim();
            const childrenNames = Array.from(document.querySelectorAll('.childName')).map(el => el.value.trim()).filter(name => name !== '').join(', ');
            if (!parentName || !parentEmail || !childrenNames) {
                showError('Please fill out all required fields (*).');
                return;
            }
            loading.style.display = 'inline-block';
            submitText.style.display = 'none';
            submitBtn.disabled = true;
            try {
                const formData = { parentName, parentEmail, childrenNames };
                const response = await fetch('/api/signup', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(formData) });
                const result = await response.json();
                if (!response.ok) { throw new Error(result.message || 'Submission failed. Please try again.'); }
                successMessage.style.display = 'block';
                launchConfetti();
                signupForm.reset();
                childrenContainer.innerHTML = `<div class="child-input-group"><input type="text" class="childName" placeholder="Child's name" required><button type="button" class="remove-child-btn" onclick="removeChildField(this)" style="display: none;">Remove</button></div>`;
            } catch (error) {
                showError(error.message);
            } finally {
                loading.style.display = 'none';
                submitText.style.display = 'inline';
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
